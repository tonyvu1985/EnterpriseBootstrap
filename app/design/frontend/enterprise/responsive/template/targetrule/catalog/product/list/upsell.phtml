<?php
/**
 * Magento Enterprise Edition
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Magento Enterprise Edition License
 * that is bundled with this package in the file LICENSE_EE.txt.
 * It is also available through the world-wide-web at this URL:
 * http://www.magentocommerce.com/license/enterprise-edition
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magentocommerce.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magentocommerce.com for more information.
 *
 * @category    design
 * @package     enterprise_default
 * @copyright   Copyright (c) 2013 Magento Inc. (http://www.magentocommerce.com)
 * @license     http://www.magentocommerce.com/license/enterprise-edition
 */
/** @var $this Enterprise_TargetRule_Block_Catalog_Product_List_Upsell */
?>
<?php if ($this->hasItems()): ?>
<div class="box-collateral box-up-sell">
	 <div class="col-xs-12" style="text-align: right">
            <!-- Prev/next controls -->
            <a class="jcarousel-prev"><i class="fa fa-angle-left fa-2x"></i></a>
            <a class="jcarousel-next"><i class="fa fa-angle-right fa-2x"></i></a> 
        </div>
	<!-- Carousel -->
	<div class="jcarousel products-grid" id="upsell-product-table">
		<ul class="products-grid">
		    <?php $i=0; foreach ($this->getItemCollection() as $_item): ?>
			<li class="item<?php if (($i - 1) % $this->getColumnCount() == 0):?> first<?php elseif ($i % $this->getColumnCount() == 0):?> last<?php endif;?>">
			    <?php
				$itemBlock = $this->getChild('catalog.product.upsell.item')->setItem($_item)->setPosition($i);
				echo $itemBlock->toHtml();
			    ?>
			</li>
		    <?php endforeach; ?>
		</ul>
	</div>
    <script type="text/javascript">decorateGeneric($$('ul.products-grid'), ['odd','even','first','last'])</script>
</div>
<?php endif ?>

<script>
jQuery(function() {
    // create instance
    jQuery('.jcarousel').jcarousel();
    
    jQuery('.jcarousel-prev').click(function() {
        jQuery('.jcarousel').jcarousel('scroll', '-=1');
    });

    jQuery('.jcarousel-next').click(function() {
        jQuery('.jcarousel').jcarousel('scroll', '+=1');
    });


});
</script>
